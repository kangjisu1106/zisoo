<!DOCTYPE html>
<html lang=ko>
<head>
<meta charset=UTF-8>
<meta name=viewport content="width=device-width, initial-scale=1.0">
<title>인터랙티브 웨이브 체험</title>
<link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/pretendard/1.3.8/static/pretendard.css>
<style>:root{--primary-color:#06c;--bg-color:#fff;--text-color:#333;--panel-bg:rgba(245,245,245,0.9);--shadow:0 4px 15px rgba(0,0,0,0.1);--transition:all .3s ease;--font-lg:16px;--font-md:14px;--font-sm:12px;--padding-lg:15px 25px;--padding-md:10px 20px;--padding-sm:8px 16px}*{margin:0;padding:0;box-sizing:border-box;font-family:"Pretendard",sans-serif}body,html{margin:0;padding:0;overflow:hidden;background:var(--bg-color);color:var(--text-color)}#app{position:relative;width:100vw;height:100vh}canvas{display:block;position:absolute;top:0;left:0;width:100%;height:100%;cursor:pointer}.guide-text{position:absolute;top:20px;left:50%;transform:translateX(-50%);font-size:var(--font-lg);font-weight:bold;color:#555;z-index:1000;width:80%;max-width:400px;text-align:center}.help-text{position:absolute;top:70px;left:50%;transform:translateX(-50%);font-size:var(--font-sm);z-index:10;opacity:.8;color:#666;width:80%;max-width:400px;text-align:center}.wave-cursor{cursor:none}.custom-cursor{position:absolute;width:20px;height:20px;border-radius:50%;pointer-events:none;transform:translate(-50%,-50%);mix-blend-mode:difference;background:#000;transition:width .2s,height .2s;z-index:9999;display:none}.controls{position:absolute;bottom:20px;left:50%;transform:translateX(-50%);display:flex;gap:15px;background:var(--panel-bg);padding:var(--padding-lg);border-radius:50px;box-shadow:var(--shadow);backdrop-filter:blur(10px);z-index:10;width:auto;max-width:90%;flex-wrap:wrap;justify-content:center}.control-btn{background:transparent;border:0;color:var(--text-color);font-size:var(--font-md);cursor:pointer;opacity:.6;transition:var(--transition);white-space:nowrap}.control-btn.active{opacity:1;color:var(--primary-color)}.control-btn:hover{opacity:1}#colorPicker{appearance:none;width:30px;height:30px;border:0;background:0;cursor:pointer}#colorPicker::-webkit-color-swatch-wrapper{padding:0}#colorPicker::-webkit-color-swatch{border:0;border-radius:50%}.falling-text{position:absolute;font-size:22px;pointer-events:none;transition:transform .5s linear,opacity .5s linear;writing-mode:vertical-lr;text-orientation:upright;letter-spacing:5px;padding:10px;display:flex;gap:20px;z-index:5}.korean{font-weight:bold;transition:color .5s ease;color:#333}.mode-toggle{position:absolute;top:120px;left:50%;transform:translateX(-50%);background:var(--panel-bg);padding:var(--padding-md);border-radius:25px;box-shadow:var(--shadow);font-size:var(--font-md);cursor:pointer;backdrop-filter:blur(10px);z-index:10;color:var(--text-color);width:auto;max-width:80%;text-align:center;white-space:nowrap}.wave-info{position:absolute;top:20px;left:50%;transform:translateX(-50%);background:var(--panel-bg);padding:var(--padding-md);border-radius:25px;box-shadow:var(--shadow);font-size:var(--font-md);text-align:center;backdrop-filter:blur(10px);z-index:10;color:var(--text-color);width:auto;max-width:80%}#welcome-popup{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(255,255,255,0.95);display:flex;flex-direction:column;justify-content:center;align-items:center;z-index:1000;text-align:center;padding:20px;box-sizing:border-box;opacity:1;transition:opacity .3s ease}#welcome-popup.hidden{opacity:0;pointer-events:none}#welcome-popup h1{color:#333;font-size:2.5em;margin-bottom:20px}#welcome-popup p{color:#555;max-width:500px;line-height:1.6;margin-bottom:30px;padding:0 20px}#start-experience{background:#06c;color:#fff;border:0;padding:12px 24px;font-size:1em;cursor:pointer;border-radius:50px;transition:background-color .3s}#start-experience:hover{background:#05a}#home-button{position:fixed;left:20px;top:20px;z-index:1001;width:50px;height:50px;background:linear-gradient(135deg,rgba(255,255,255,0.1) 0,rgba(255,255,255,0.2) 100%);backdrop-filter:blur(20px);border:1px solid rgba(255,255,255,0.15);border-radius:50%;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .3s ease;box-shadow:0 8px 32px rgba(0,0,0,0.3)}#home-button:hover{background:linear-gradient(135deg,rgba(255,255,255,0.2) 0,rgba(255,255,255,0.3) 100%);transform:translateY(-2px) scale(1.05);box-shadow:0 12px 40px rgba(0,0,0,0.4)}#home-button svg{width:24px;height:24px;fill:rgba(102,102,102,0.8);transition:all .3s ease}#home-button:hover svg{fill:rgba(102,102,102,1)}@media screen and (max-width:480px){:root{--font-lg:14px;--font-md:12px;--font-sm:10px;--padding-lg:10px 20px;--padding-md:8px 16px;--padding-sm:6px 12px}.guide-text{top:10px;width:90%}.help-text{top:50px;width:90%}.mode-toggle{top:90px;padding:var(--padding-sm);font-size:var(--font-sm);max-width:90%}.controls{padding:var(--padding-sm);gap:10px}.control-btn{font-size:var(--font-sm)}#colorPicker{width:25px;height:25px}.falling-text{font-size:18px;letter-spacing:3px}#welcome-popup h1{font-size:2em}#welcome-popup p{font-size:.9em;padding:0 10px}#start-experience{padding:10px 20px;font-size:.9em}#home-button{width:40px;height:40px;left:15px;top:15px}#home-button svg{width:20px;height:20px}}@media screen and (min-width:481px) and (max-width:768px){:root{--font-lg:15px;--font-md:13px;--font-sm:11px;--padding-lg:12px 22px;--padding-md:9px 18px;--padding-sm:7px 14px}.guide-text{top:15px;width:85%}.help-text{top:60px;width:85%}.mode-toggle{top:105px;max-width:85%}.falling-text{font-size:20px;letter-spacing:.4px}}@media screen and (max-height:480px){.guide-text{top:5px}.help-text{top:40px}.mode-toggle{top:75px}.controls{bottom:10px}}</style>
</head>
<body>
<div id=home-button onclick=goHome()>
<svg viewBox="0 0 24 24">
<path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>
</svg>
</div>
<div id=welcome-popup>
<h1>2D WAVE</h1>
<p>2가지의 2D WAVE 모드를 즐겨보세요. <br>마우스와 키보드로 다양한 물결을 만들어보세요.</p>
<button id=start-experience>시작하기</button>
</div>
<div id=app>
<canvas id=waveCanvas></canvas>
<div class=custom-cursor id=customCursor></div>
<div class=guide-text id=textModeGuide>숫자 키 1~9까지 눌러 텍스트 생성</div>
<div class=wave-info id=galleryModeGuide style=display:none>웨이브 타입: <span id=waveInfo>유기적</span></div>
<div class=help-text id=textModeHelp>숫자 키를 눌러 텍스트를 떨어뜨리세요. 텍스트가 물에 닿으면 파동이 생성됩니다.</div>
<div class=help-text id=galleryModeHelp style=display:none>← → : 웨이브 타입 변경 | 스페이스바 : 랜덤 웨이브 | 마우스로 상호작용</div>
<div class=mode-toggle id=modeToggle>모드 전환: 텍스트 낙하 모드</div>
<div class=controls>
<input type=color id=colorPicker value=#0066cc>
<button class=control-btn id=waveTypeBtn>웨이브 타입</button>
<button class="control-btn active" id=interactiveBtn>인터랙션</button>
</div>
</div>
<script>function goHome(){window.location.href='index.html';}
document.addEventListener('DOMContentLoaded',()=>{const welcomePopup=document.getElementById('welcome-popup');const startExperienceBtn=document.getElementById('start-experience');startExperienceBtn.addEventListener('click',()=>{welcomePopup.classList.add('hidden');setTimeout(()=>{},300);});});class CombinedWaveExperience{constructor(){this.canvas=document.getElementById('waveCanvas');this.ctx=this.canvas.getContext('2d');this.waveInfo=document.getElementById('waveInfo');this.colorPicker=document.getElementById('colorPicker');this.waveTypeBtn=document.getElementById('waveTypeBtn');this.interactiveBtn=document.getElementById('interactiveBtn');this.modeToggle=document.getElementById('modeToggle');this.setupCanvas();this.setupEventListeners();this.time=0;this.colors=['#0066cc','#E74C3C','#2ECC71','#3498DB','#F39C12','#6C5CE7','#FF8A5B','#27AE60','#9B59B6','#F39C12'];this.colorIndex=0;this.fallingTexts=[];this.waves=[];this.isTextMode=true;this.updateModeToggleText();this.initializeWaveProperties();this.numberTexts={'1':{ko:'안녕하세요'},'2':{ko:'이 사이트는'},'3':{ko:'다양하고'},'4':{ko:'실험적인'},'5':{ko:'인터랙션과'},'6':{ko:'애니메이션을 보여주는'},'7':{ko:'반응형 웹사이트입니다.'},'8':{ko:'천천히 재미있게'},'9':{ko:'사이트를 즐겨주세요.'}};this.animate();}
setupCanvas(){this.resize();window.addEventListener('resize',()=>this.resize());}
resize(){const dpr=window.devicePixelRatio||1;this.canvas.width=window.innerWidth*dpr;this.canvas.height=window.innerHeight*dpr;this.ctx.scale(dpr,dpr);this.middleY=this.canvas.height/2;this.colorChangeY=this.middleY-this.middleY/2;this.centerY=this.canvas.height/2;this.width=this.canvas.width;this.height=this.canvas.height;}
initializeWaveProperties(){this.waveTypes=[{name:'유기적',generate:(x,time,baseAmplitude)=>{const primaryWave=Math.sin(x*0.01+time*0.3);const secondaryWave=Math.sin(x*0.02-time*0.2)*0.5;const tertiaryWave=Math.sin(x*0.005+time*0.1)*0.25;return baseAmplitude*(primaryWave+secondaryWave+tertiaryWave);}},{name:'유동적',generate:(x,time,baseAmplitude)=>{const frequencyModulation=Math.sin(time*0.2)*0.1;return baseAmplitude*Math.sin(x*(0.015+frequencyModulation)+
time*0.4+
Math.sin(x*0.03)*0.5);}},{name:'난류',generate:(x,time,baseAmplitude)=>{const chaosFactor=Math.sin(time*0.3)*2;return baseAmplitude*(Math.sin(x*0.02+time*0.4)*Math.sin(x*0.01+chaosFactor)*(1+Math.sin(time*0.1)));}}];this.interactionPoints=[];this.currentWaveTypeIndex=0;this.baseAmplitude=80;this.mouseInteraction={x:null,y:null,isActive:false,influence:0};this.isInteractive=true;}
setupEventListeners(){this.modeToggle.addEventListener('click',()=>{this.isTextMode=!this.isTextMode;this.updateModeToggleText();});this.canvas.addEventListener('mousemove',(e)=>{const rect=this.canvas.getBoundingClientRect();this.mouseX=e.clientX;this.mouseY=e.clientY;if(!this.isTextMode){this.mouseInteraction.x=e.clientX-rect.left;this.mouseInteraction.y=e.clientY-rect.top;if(this.mouseInteraction.isActive&&this.isInteractive){this.addInteractionPoint(this.mouseInteraction.x,this.mouseInteraction.y);}}});this.canvas.addEventListener('mousedown',()=>{if(!this.isTextMode&&this.isInteractive){this.mouseInteraction.isActive=true;}});this.canvas.addEventListener('mouseup',()=>{this.mouseInteraction.isActive=false;if(!this.isTextMode){this.interactionPoints=[];}});this.canvas.addEventListener('mouseleave',()=>{this.mouseX=null;this.mouseY=null;this.mouseInteraction.x=null;this.mouseInteraction.y=null;this.mouseInteraction.isActive=false;if(!this.isTextMode){this.interactionPoints=[];}});window.addEventListener('keydown',(e)=>{const key=e.key;if(this.numberTexts[key]){const textX=Math.random()*this.canvas.width;this.fallingTexts.push(this.createFallingText(this.numberTexts[key],textX));}
if(!this.isTextMode){switch(e.key){case'ArrowRight':case'ArrowLeft':this.cycleWaveType(e.key==='ArrowRight'?1:-1);break;case'ArrowUp':case'ArrowDown':this.toggleInteractiveMode();break;case' ':e.preventDefault();this.randomizeWave();break;}}});this.waveTypeBtn.addEventListener('click',()=>{if(this.isTextMode){this.cycleColor();}else{this.cycleWaveType(1);}});this.interactiveBtn.addEventListener('click',()=>this.toggleInteractiveMode());this.colorPicker.addEventListener('input',()=>{this.colorIndex=this.colors.indexOf(this.colorPicker.value);if(this.colorIndex===-1)this.colorIndex=0;});}
updateModeToggleText(){this.modeToggle.textContent=`모드 전환:${this.isTextMode?'텍스트 낙하 모드':'웨이브 갤러리 모드'}`;document.getElementById('textModeGuide').style.display=this.isTextMode?'block':'none';document.getElementById('galleryModeGuide').style.display=this.isTextMode?'none':'block';document.getElementById('textModeHelp').style.display=this.isTextMode?'block':'none';document.getElementById('galleryModeHelp').style.display=this.isTextMode?'none':'block';}
cycleWaveType(direction){this.currentWaveTypeIndex=(this.currentWaveTypeIndex+direction+this.waveTypes.length)%this.waveTypes.length;const currentWaveType=this.waveTypes[this.currentWaveTypeIndex];this.waveInfo.textContent=currentWaveType.name;}
toggleInteractiveMode(){this.isInteractive=!this.isInteractive;this.interactiveBtn.classList.toggle('active',this.isInteractive);}
cycleColor(){this.colorIndex=(this.colorIndex+1)%this.colors.length;this.colorPicker.value=this.colors[this.colorIndex];}
randomizeWave(){this.baseAmplitude=50+Math.random()*50;document.getElementById('galleryModeGuide').style.transform='translateX(-50%) scale(1.1)';setTimeout(()=>{document.getElementById('galleryModeGuide').style.transform='translateX(-50%) scale(1)';},200);}
addInteractionPoint(x,y){const newPoint={x:x,y:y,timestamp:Date.now(),intensity:Math.random()*0.5+0.5,decay:Math.random()*0.01+0.005};this.interactionPoints.push(newPoint);if(this.interactionPoints.length>20){this.interactionPoints.shift();}}
calculateWaveHeight(x,time){const currentWaveType=this.waveTypes[this.currentWaveTypeIndex];let baseHeight=currentWaveType.generate(x,time,this.baseAmplitude);if(this.isInteractive){this.interactionPoints.forEach(point=>{const distance=Math.abs(x-point.x);const timeSinceCreation=(Date.now()-point.timestamp)/1000;const influence=point.intensity*Math.max(0,1-timeSinceCreation*point.decay)*Math.max(0,1-distance/200);baseHeight+=Math.sin(distance*0.1)*influence*30;});if(this.mouseInteraction.x!==null){const mouseDistance=Math.abs(x-this.mouseInteraction.x);const mouseInfluence=Math.max(0,1-mouseDistance/250);baseHeight+=Math.sin(this.time*2)*mouseInfluence*20;}}
return baseHeight;}
createFallingText(textObj,x){const textElement=document.createElement('div');textElement.className='falling-text';const koreanSpan=document.createElement('span');koreanSpan.className='korean';koreanSpan.textContent=textObj.ko;textElement.appendChild(koreanSpan);textElement.style.left=`${x}px`;textElement.style.top='0px';document.body.appendChild(textElement);const wobble=()=>{const wobbleAmount=2;textElement.style.transform=`translate(-50%,${textElement.offsetTop}px)
translateX(${Math.sin(Date.now()/500)*wobbleAmount}px)`;requestAnimationFrame(wobble);};wobble();return{element:textElement,x:x,y:0,speed:3,colorChanged:false};}
updateFallingTexts(){this.fallingTexts.forEach((text,index)=>{text.y+=text.speed;text.element.style.top=`${text.y}px`;if(text.y>=this.colorChangeY&&!text.colorChanged){const koreanText=text.element.querySelector('.korean');koreanText.style.color='#000000';text.colorChanged=true;}
if(text.y>=this.middleY&&!text.waveCreated){this.generateWave(text.x);text.waveCreated=true;}
if(text.y>=this.middleY+50){text.element.style.opacity='0';setTimeout(()=>{text.element.remove();},500);this.fallingTexts.splice(index,1);}});}
generateWave(x){const waveAmplitude=Math.random()*10+60;const waveFrequency=Math.random()*0.02+0.01;this.waves.push({amplitude:waveAmplitude,frequency:waveFrequency,offset:0,x:x,alpha:0,color:this.colorPicker.value});}
drawTextFallingMode(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height);this.ctx.fillStyle='#FFFFFF';this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height);const waterColor=this.colorPicker.value;const waterR=parseInt(waterColor.slice(1,3),16);const waterG=parseInt(waterColor.slice(3,5),16);const waterB=parseInt(waterColor.slice(5,7),16);this.ctx.fillStyle=`rgba(${waterR},${waterG},${waterB},0.2)`;this.ctx.fillRect(0,this.middleY,this.canvas.width,this.canvas.height-this.middleY);this.waves.forEach((wave)=>{const waveColor=wave.color||waterColor;const r=parseInt(waveColor.slice(1,3),16);const g=parseInt(waveColor.slice(3,5),16);const b=parseInt(waveColor.slice(5,7),16);this.ctx.fillStyle=`rgba(${r},${g},${b},${0.6-wave.alpha*0.6})`;this.ctx.beginPath();for(let x=0;x<this.canvas.width;x++){const distanceFromDrop=Math.abs(x-wave.x);const dynamicAmplitude=wave.amplitude*Math.sin(Date.now()*0.002+wave.offset)*Math.exp(-distanceFromDrop/500);const y=this.middleY+Math.sin(x*wave.frequency+wave.offset)*dynamicAmplitude;this.ctx.lineTo(x,y);}
this.ctx.lineTo(this.canvas.width,this.canvas.height);this.ctx.lineTo(0,this.canvas.height);this.ctx.closePath();this.ctx.fill();wave.offset+=0.05;wave.alpha+=0.005;});this.waves=this.waves.filter(wave=>wave.alpha<1);this.updateFallingTexts();}
drawGalleryMode(){this.ctx.clearRect(0,0,this.width,this.height);this.ctx.fillStyle='#FFFFFF';this.ctx.fillRect(0,0,this.width,this.height);this.ctx.beginPath();this.ctx.moveTo(0,this.centerY);for(let x=0;x<this.width;x++){const y=this.centerY+this.calculateWaveHeight(x,this.time);this.ctx.lineTo(x,y);}
const waveColor=this.colorPicker.value;this.ctx.strokeStyle=waveColor;this.ctx.lineWidth=3;this.ctx.stroke();}
animate(){this.time+=0.05;if(this.isTextMode){this.drawTextFallingMode();}else{this.interactionPoints=this.interactionPoints.filter(point=>(Date.now()-point.timestamp)/1000<2);this.drawGalleryMode();}
requestAnimationFrame(()=>this.animate());}}
document.addEventListener('DOMContentLoaded',()=>{new CombinedWaveExperience();});</script>
</body>
</html>